<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Adminbereich</title><!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Adminbereich</title>
<link rel="stylesheet" href="/static/admin.css">
</head>
<body>

<h1>Adminbereich</h1>

<input type="text" id="search" placeholder="Suchen...">

<table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>Tag 1</th>
<th>Tag 2</th>
<th>Tag 3</th>
<th>Vers 1</th>
<th>Vers 2</th>
<th>Vers 3</th>
<th>Punkte</th>
<th>Aktion</th>
</tr>
</thead>
<tbody>
{% for k in data %}
<tr>
<form method="POST" action="/save/{{ k.ID }}?pw={{ pw }}">
<td>{{ k.ID }}</td>
<td>{{ k.Vorname }} {{ k.Nachname }}</td>

<td><input type="checkbox" name="tag1" {% if k.tag1 %}checked{% endif %}></td>
<td><input type="checkbox" name="tag2" {% if k.tag2 %}checked{% endif %}></td>
<td><input type="checkbox" name="tag3" {% if k.tag3 %}checked{% endif %}></td>

<td><input type="checkbox" name="verse1" {% if k.verse1 %}checked{% endif %}></td>
<td><input type="checkbox" name="verse2" {% if k.verse2 %}checked{% endif %}></td>
<td><input type="checkbox" name="verse3" {% if k.verse3 %}checked{% endif %}></td>

<td>{{ k.punkte or 0 }}</td>

<td>
<button type="submit">ğŸ’¾</button>
<a href="/delete/{{ k.ID }}?pw={{ pw }}" onclick="return confirm('Kind wirklich lÃ¶schen?')">ğŸ—‘</a>
</td>
</form>
</tr>
{% endfor %}
</tbody>
</table>

</body>
</html>

<link rel="stylesheet" href="/static/admin.css">
</head>
<body>
<div class="admin-container">
<h1>Adminbereich</h1>

<form method="get" class="search-box">
<input type="hidden" name="pw" value="{{ pw }}">
<input type="text" name="search" placeholder="Suchen nach ID, Vorname, Nachname" value="{{ search_query }}">
<button type="submit">ğŸ” Suchen</button>
</form>

<a href="/export_excel?pw={{ pw }}">ğŸ“¥ Excel Export</a>

<table border="1">
<tr>
    <th>ID</th>
    <th>Geschlecht</th>
    <th>Vorname</th>
    <th>Nachname</th>
    <th>StraÃŸe</th>
    <th>PLZ</th>
    <th>Ort</th>
    <th>Telefon</th>
    <th>E-Mail</th>
    <th>Allergien</th>
    <th>Anmeldung</th>
    <th>Punkte</th>
    <th>Alter</th>
    <th>Gruppe</th>
    <th>Unterschrift</th>
    <th>Aktion</th>
</tr>

{% for r in registrations %}
<form method="POST" action="/update/{{ r.ID }}?pw={{ pw }}">
<tr>
    <td>{{ r.ID }}</td>
    <td>
        <select name="Geschlecht">
            <option value="m" {% if r.Geschlecht=='m' %}selected{% endif %}>m</option>
            <option value="w" {% if r.Geschlecht=='w' %}selected{% endif %}>w</option>
        </select>
    </td>
    <td><input type="text" name="Vorname" value="{{ r.Vorname }}"></td>
    <td><input type="text" name="Nachname" value="{{ r.Nachname }}"></td>
    <td><input type="text" name="Strasse" value="{{ r.Strasse }}"></td>
    <td><input type="text" name="PLZ" value="{{ r.PLZ }}"></td>
    <td><input type="text" name="Ort" value="{{ r.Ort }}"></td>
    <td><input type="text" name="Notfallnummer" value="{{ r.Notfallnummer }}"></td>
    <td><input type="text" name="Email" value="{{ r.Email }}"></td>
    <td>
        <select name="Allergien">
            <option value="">--</option>
            <option value="keine" {% if r.Allergien=='keine' %}selected{% endif %}>Keine</option>
            <option value="nÃ¼sse" {% if r.Allergien=='nÃ¼sse' %}selected{% endif %}>NÃ¼sse</option>
            <option value="laktose" {% if r.Allergien=='laktose' %}selected{% endif %}>Laktose</option>
            <option value="ei" {% if r.Allergien=='ei' %}selected{% endif %}>Ei</option>
            <option value="gluten" {% if r.Allergien=='gluten' %}selected{% endif %}>Gluten</option>
        </select>
    </td>

    <!-- Anmeldung: Tage oben, Bibelverse unten -->
    <td>
        <div style="display:flex; flex-direction:column;">
            <div style="display:flex; justify-content:space-between;">
                {% for i in range(1,6) %}
                <input type="checkbox" name="Tag{{ i }}" {% if r['Tag'+i|string] %}checked{% endif %}>
                {% endfor %}
            </div>
            <div style="display:flex; justify-content:space-between; margin-top:4px;">
                {% for i in range(1,6) %}
                <input type="checkbox" name="Verse{{ i }}" {% if r['Verse'+i|string] %}checked{% endif %}>
                {% endfor %}
            </div>
        </div>
    </td>

    <td>{{ r.Punkte }}</td>
    <td>{{ r.Alter }}</td>
    <td>{{ r.Gruppe }}</td>
    <td>
        {% if r.Unterschrift %}
            <img src="{{ r.Unterschrift }}" width="80">
        {% endif %}
    </td>
    <td>
        <button type="submit">ğŸ’¾</button>
        <a href="/delete/{{ r.ID }}?pw={{ pw }}">ğŸ—‘</a>
    </td>
</tr>
</form>
{% endfor %}
</table>
</div>
</body>
</html>
