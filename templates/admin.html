<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Admin â€“ Kinder-Ferien-Club</title>
<link rel="stylesheet" href="/static/admin.css">
</head>
<body>

<div class="admin-container">
<h1>Adminbereich</h1>

<div class="controls">
<input type="text" id="search" placeholder="ID / Vorname / Nachname"
       value="{{ search }}"
       oninput="liveSearch(this.value)">

<div class="day-filter">
{% for i in range(1,6) %}
<a href="?pw={{ pw }}&day=Tag{{ i }}">Tag {{ i }}</a>
{% endfor %}
<a href="?pw={{ pw }}">Alle</a>
</div>

<a class="export-btn" href="/export_excel?pw={{ pw }}">Excel Export</a>
</div>

{% for r in registrations %}
<form method="POST" action="/update/{{ r.ID }}?pw={{ pw }}" class="row">
<b>ID {{ r.ID }}</b><br>

<input name="Vorname" value="{{ r.Vorname }}">
<input name="Nachname" value="{{ r.Nachname }}">
<input name="Geburtsdatum" type="date" value="{{ r.Geburtsdatum }}">
<input name="Strasse" value="{{ r.Strasse }}">
<input name="PLZ" value="{{ r.PLZ }}">
<input name="Ort" value="{{ r.Ort }}">
<input name="Notfallnummer" value="{{ r.Notfallnummer }}">

<div class="checks">
{% for i in range(1,6) %}
<label><input type="checkbox" name="Tag{{ i }}" {% if r["Tag"+i|string] %}checked{% endif %}> Tag {{ i }}</label>
<label><input type="checkbox" name="Verse{{ i }}" {% if r["Verse"+i|string] %}checked{% endif %}> Vers {{ i }}</label>
{% endfor %}
</div>

<b>Punkte: {{ r.Punkte }}</b><br>

{% if r.Unterschrift %}
<img src="{{ r.Unterschrift }}" class="sig">
{% endif %}

<button type="submit">ðŸ’¾ Speichern</button>
<a class="delete" href="/delete/{{ r.ID }}?pw={{ pw }}">ðŸ—‘ LÃ¶schen</a>
</form>
{% endfor %}
</div>

<script>
function liveSearch(val){
    window.location = "?pw={{ pw }}&search=" + encodeURIComponent(val);
}
</script>

</body>
</html>
