<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Adminbereich</title>
<link rel="stylesheet" href="/static/admin.css">
</head>
<body>
<div class="admin-container">
<h1>Adminbereich</h1>

<form method="get" class="search-box">
<input type="hidden" name="pw" value="{{ pw }}">
<input type="text" name="search" placeholder="Suchen nach ID, Vorname, Nachname" value="{{ search_query }}">
<button type="submit">ğŸ” Suchen</button>
</form>

<a href="/export_excel?pw={{ pw }}" class="export-btn">ğŸ“¥ Excel Export</a>

<table border="1">
<tr>
    <th>ID</th>
    <th>Geschlecht</th>
    <th>Vorname</th>
    <th>Nachname</th>
    <th>StraÃŸe</th>
    <th>PLZ</th>
    <th>Ort</th>
    <th>Geburtsdatum</th>
    <th>Telefon</th>
    <th>E-Mail</th>
    <th>Allergien</th>
    <th>Anmeldung</th>
    <th>Punkte</th>
    <th>Alter</th>
    <th>Gruppe</th>
    <th>Unterschrift</th>
    <th>Aktion</th>
</tr>

{% for r in registrations %}
<tr>
    <form method="POST" action="/update/{{ r.ID }}">
    <td>{{ r.ID }}</td>
    <td>
        <select name="Geschlecht">
            <option value="m" {% if r.Geschlecht=='m' %}selected{% endif %}>m</option>
            <option value="w" {% if r.Geschlecht=='w' %}selected{% endif %}>w</option>
        </select>
    </td>
    <td><input type="text" name="Vorname" value="{{ r.Vorname }}"></td>
    <td><input type="text" name="Nachname" value="{{ r.Nachname }}"></td>
    <td><input type="text" name="Strasse" value="{{ r.Strasse }}"></td>
    <td><input type="text" name="PLZ" value="{{ r.PLZ }}"></td>
    <td><input type="text" name="Ort" value="{{ r.Ort }}"></td>
    <td><input type="date" name="Geburtsdatum" value="{{ r.Geburtsdatum }}"></td>
    <td><input type="text" name="Notfallnummer" value="{{ r.Notfallnummer }}"></td>
    <td><input type="email" name="Email" value="{{ r.Email }}"></td>
    <td>
        <select name="Allergien">
            <option value="">--</option>
            <option value="keine" {% if r.Allergien=='keine' %}selected{% endif %}>Keine</option>
            <option value="nÃ¼sse" {% if r.Allergien=='nÃ¼sse' %}selected{% endif %}>NÃ¼sse</option>
            <option value="laktose" {% if r.Allergien=='laktose' %}selected{% endif %}>Laktose</option>
            <option value="ei" {% if r.Allergien=='ei' %}selected{% endif %}>Ei</option>
            <option value="gluten" {% if r.Allergien=='gluten' %}selected{% endif %}>Gluten</option>
        </select>
    </td>

    <!-- Anmeldung KÃ¤stchen: Tage oben, Bibelverse unten, in einer Spalte -->
    <td>
        <div style="display:flex; flex-direction:column;">
            <div style="display:flex; justify-content:space-between; font-weight:bold; margin-bottom:2px;">Tag(e)</div>
            <div style="display:flex; justify-content:space-between;">
                {% for i in range(5) %}
                <input type="checkbox" name="Tag{{ i+1 }}" {% if r['Tag'+i|string] %}checked{% endif %}>
                {% endfor %}
            </div>
            <div style="display:flex; justify-content:space-between; font-weight:bold; margin-top:4px;">Verse</div>
            <div style="display:flex; justify-content:space-between;">
                {% for i in range(5) %}
                <input type="checkbox" name="Verse{{ i+1 }}" {% if r['Verse'+i|string] %}checked{% endif %}>
                {% endfor %}
            </div>
        </div>
    </td>

    <td>{{ r.Punkte }}</td>
    <td>{{ r.Alter }}</td>
    <td>
        {% if r.Alter >=5 and r.Alter <=7 %}
            5-7
        {% elif r.Alter >=8 and r.Alter <=13 %}
            8-13
        {% else %}
            --
        {% endif %}
    </td>
    <td>
        {% if r.Unterschrift %}
            <img src="{{ r.Unterschrift }}" width="80">
        {% endif %}
    </td>
    <td>
        <button type="submit">ğŸ’¾</button>
        <a href="/delete/{{ r.ID }}?pw={{ pw }}">ğŸ—‘</a>
    </td>
    </form>
</tr>
{% endfor %}
</table>

</div>
</body>
</html>
